services:
  - type: web
    name: kaizen-lists-api
    runtime: python
    rootDir: backend
    buildCommand: pip install -r requirements.txt && rm -f migrations/versions/add_soft_delete_to_listas.py migrations/versions/merge_soft_delete_head.py migrations/versions/add_default_to_unidade.py && python fix_migration_version.py && export FLASK_APP=run.py && flask db upgrade
    startCommand: gunicorn -w 4 -b 0.0.0.0:$PORT run:app
    envVars:
      - key: FLASK_CONFIG
        value: production
      - key: FLASK_APP
        value: run.py
      - key: DATABASE_URL
        value: ""
